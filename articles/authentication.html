<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Authentication • susoapi</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Authentication">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">susoapi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.3.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/susoapi.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/authentication.html">Authentication</a></li>
    <li><a class="dropdown-item" href="../articles/exporting.html">Exporting</a></li>
    <li><a class="dropdown-item" href="../articles/users.html">Managing users</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/arthur-shaw/susoapi/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Authentication</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/arthur-shaw/susoapi/blob/v0.3.1/vignettes/authentication.Rmd" class="external-link"><code>vignettes/authentication.Rmd</code></a></small>
      <div class="d-none name"><code>authentication.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="why">Why<a class="anchor" aria-label="anchor" href="#why"></a>
</h2>
<p>When connecting to a Survey Solutions server, users are asked for
their login and password. These details, taken together, are
authentication.</p>
<p>When an API user tries to interact with a Survey Solutions server,
the same details are required. That is, each call to the server needs to
provide a valid API user name and password.</p>
</div>
<div class="section level2">
<h2 id="how">How<a class="anchor" aria-label="anchor" href="#how"></a>
</h2>
<p>There are two ways to provide authentication:</p>
<ol style="list-style-type: decimal">
<li>Manually</li>
<li>Programmatically</li>
</ol>
<div class="section level3">
<h3 id="manually">Manually<a class="anchor" aria-label="anchor" href="#manually"></a>
</h3>
<p>Every <code>susoapi</code> function that interacts with a server
requires the same core parameters: <code>server</code>,
<code>workspace</code>, <code>user</code>, and
<code>password</code>.</p>
<p>The function user could specify those parameters separately for time
such a function is used. For example:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># first, get all questionnaires</span></span>
<span><span class="fu"><a href="../reference/get_questionnaires.html">get_questionnaires</a></span><span class="op">(</span></span>
<span>  server <span class="op">=</span> <span class="st">"https://example.server"</span>,</span>
<span>  workspace <span class="op">=</span> <span class="st">"myworkspace"</span>,</span>
<span>  user <span class="op">=</span> <span class="st">"My_API_user1"</span>,</span>
<span>  password <span class="op">=</span> <span class="st">"MySecretPassword2Day"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># then, active audio capture for a questionnaire</span></span>
<span><span class="fu"><a href="../reference/set_questionnaire_audio.html">set_questionnaire_audio</a></span><span class="op">(</span></span>
<span>  qnr_id <span class="op">=</span> <span class="st">"72f7160c-12dc-4dd4-9df1-66af819e434d"</span>,</span>
<span>  qnr_version <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  server <span class="op">=</span> <span class="st">"https://example.server"</span>,</span>
<span>  workspace <span class="op">=</span> <span class="st">"myworkspace"</span>,</span>
<span>  user <span class="op">=</span> <span class="st">"My_API_user1"</span>,</span>
<span>  password <span class="op">=</span> <span class="st">"MySecretPassword2Day"</span>  </span>
<span><span class="op">)</span></span></code></pre></div>
<p>The code works. But it is not without a few noteworthy problems.
First, this solution involves needless repetition. For a few function
calls, this is fairly manageable. For more functiton calls, this becomes
tedious and error-prone.</p>
<p>Second, this solution requires these details to be provided each time
a function needs them. Put another way, authentication does not persist
across R sessions.</p>
<p>Third, this solution stores sensitive information in an unsafe media:
a plain-text script or an R session’s memory. If one shares scripts
containing these function calls, one of two problems would arise. Either
authentication would be shared with all who can access the code (e.g.,
GitHub repo) or the script would need to be “sanitized” before being
shared (e.g., replace the <code>user</code> and <code>password</code>
parameter values with <code>"XXXXX"</code>).</p>
</div>
<div class="section level3">
<h3 id="programmatically">Programmatically<a class="anchor" aria-label="anchor" href="#programmatically"></a>
</h3>
<p>The <code>susoapi</code> package offers a better solution that
addresses all these problems simultaneously. Rather than provide
authentication separately for each function,
<code><a href="../reference/set_credentials.html">set_credentials()</a></code> captures authentication once, provides it
to each function, and store those sensitive details somewhere safe.
Contrast the code below with the code above:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># first, set credentials for connecting with the server</span></span>
<span><span class="fu"><a href="../reference/set_credentials.html">set_credentials</a></span><span class="op">(</span></span>
<span>  server <span class="op">=</span> <span class="st">"https://example.server"</span>,</span>
<span>  workspace <span class="op">=</span> <span class="st">"myworkspace"</span>,</span>
<span>  user <span class="op">=</span> <span class="st">"My_API_user1"</span>,</span>
<span>  password <span class="op">=</span> <span class="st">"MySecretPassword2Day"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># then, get all questionnaires</span></span>
<span><span class="fu"><a href="../reference/get_questionnaires.html">get_questionnaires</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># next, active audio capture for a questionnaire</span></span>
<span><span class="fu"><a href="../reference/set_questionnaire_audio.html">set_questionnaire_audio</a></span><span class="op">(</span></span>
<span>  qnr_id <span class="op">=</span> <span class="st">"72f7160c-12dc-4dd4-9df1-66af819e434d"</span>,</span>
<span>  qnr_version <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The <code><a href="../reference/set_credentials.html">set_credentials()</a></code> function captures authentication
and makes it available in two secure places. For the current session,
the function loads the parameters to R environment variables:
<code>SUSO_SERVER</code> for the server address,
<code>SUSO_WORKSPACE</code> for the server workspace,
<code>SUSO_USER</code> for the API user name, and
<code>SUSO_PASSWORD</code> for the API user password. For future
sessions, the function writes credentials to the .Renviron and loaded
the credentials upon session startup.</p>
<p>The <code>susoapi</code> functions that communicate with the server
load source those values from R environment variables. For example, see
the default arguments for <code>get_questionnaires</code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_questionnaires.html">get_questionnaires</a></span><span class="op">(</span></span>
<span>  server <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"SUSO_SERVER"</span><span class="op">)</span>,</span>
<span>  workspace <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"SUSO_WORKSPACE"</span><span class="op">)</span>,</span>
<span>  user <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"SUSO_USER"</span><span class="op">)</span>,</span>
<span>  password <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"SUSO_PASSWORD"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>This allows function users to set credentials once an use them
several times without any effort.</p>
</div>
<div class="section level3">
<h3 id="typical-workflow">Typical workflow<a class="anchor" aria-label="anchor" href="#typical-workflow"></a>
</h3>
<p>When setting credentials for server authentication, the typical
workflow is to:</p>
<ul>
<li>Set</li>
<li>Inspect</li>
<li>Check</li>
<li>Correct (optionally)</li>
</ul>
<div class="section level4">
<h4 id="set">Set<a class="anchor" aria-label="anchor" href="#set"></a>
</h4>
<p>To set credentials, one simply uses <code><a href="../reference/set_credentials.html">set_credentials()</a></code> as
below:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/set_credentials.html">set_credentials</a></span><span class="op">(</span></span>
<span>  server <span class="op">=</span> <span class="st">"https://example.server"</span>,</span>
<span>  workspace <span class="op">=</span> <span class="st">"myworkspace"</span>,</span>
<span>  user <span class="op">=</span> <span class="st">"My_API_user1"</span>,</span>
<span>  password <span class="op">=</span> <span class="st">"MySecretPassword2Day"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="inspect">Inspect<a class="anchor" aria-label="anchor" href="#inspect"></a>
</h4>
<p>To make sure that the function recorded the intended values, one can
inspect via <code><a href="../reference/show_credentials.html">show_credentials()</a></code> as here:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/show_credentials.html">show_credentials</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Alternatively, one could fetch individual credentials from R
environment variables.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fetch elements of the credentials</span></span>
<span></span>
<span><span class="co"># Server address</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"SUSO_SERVER"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Workspace</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"SUSO_WORKSPACE"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># API user name</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"SUSO_USER"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># API user password</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"SUSO_PASSWORD"</span><span class="op">)</span></span></code></pre></div>
<p>The <code><a href="../reference/show_credentials.html">show_credentials()</a></code> function makes this process
easier and more streamlined.</p>
</div>
<div class="section level4">
<h4 id="check">Check<a class="anchor" aria-label="anchor" href="#check"></a>
</h4>
<p>To check the validity of credentails for authentication, one can use
<code><a href="../reference/check_credentials.html">check_credentials()</a></code> as below:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># check that credentials for the fake server are valid (they are not)</span></span>
<span><span class="fu"><a href="../reference/check_credentials.html">check_credentials</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="correct">Correct<a class="anchor" aria-label="anchor" href="#correct"></a>
</h4>
<p>To correct incorrect credentials, simply use
<code><a href="../reference/set_credentials.html">set_credentials()</a></code> again, specifying the correct credentials
for authenication.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># correct incorrect credentials</span></span>
<span><span class="co"># set the correct ones</span></span>
<span><span class="fu"><a href="../reference/set_credentials.html">set_credentials</a></span><span class="op">(</span></span>
<span>  server <span class="op">=</span> <span class="st">"https://exampleserver.com"</span>,</span>
<span>  workspace <span class="op">=</span> <span class="st">"myworkspace"</span>,</span>
<span>  user <span class="op">=</span> <span class="st">"My_API_user10"</span>,</span>
<span>  password <span class="op">=</span> <span class="st">"MySecretPassword2Day123"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Arthur Shaw.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
